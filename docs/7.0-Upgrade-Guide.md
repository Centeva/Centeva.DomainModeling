# Upgrading to 7.0

## Removals

### `IDateTimeProvider` removed

This interface was a bit of an anomaly and not related to, or required by, the
domain-focused types defined in this library.  Individual projects should
provide their own implementation, especially as other date/time libraries
such as [NodaTime](https://nodatime.org/) may be used.

### `IQueryableRepository` removed

This interface was marked obsolete and is being removed.  This technique is not
recommended to be used as it leaks the IQueryable interface.  Doing so when
using Entity Framework can allow developers to delay the execution of SQL to a
point later in the handling of an application request, resulting in unexpected
behavior.

### `BaseIntegrationEvent` removed

This base class does not belong at the domain level of an application, and may
not even be usable depending on how you implement integration events.  For
example, the MassTransit library does not play well with inherited types.

## New `Centeva.SharedKernel.Testing` Package

This provides the `FakeRepository` class which can be used when unit testing.
You can provide a `List` of entities when instantiating it, then perform all of
the defined Repository operations in-memory.

```csharp
var users = new List<User>
{
    new User(...),
    new User(...)
};
var repository = new FakeRepository<User, Guid>(users);

var userCount = await repository.CountAsync();

userCount.Should().Be(users.Count);
```
